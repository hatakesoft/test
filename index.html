<!doctype html>

<html>

<head>
	<meta charset="utf-8">
	<title>桃太郎電鉄</title>
	<style>
		body,
		html {
			margin: 0;
			overflow: hidden;
			padding: 0;
		}

		.screen {
			display: none;
		}

		.active {
			display: block;
		}

		#canvas {
			background-color: deepskyblue;
			color: black;
			cursor: pointer;
		}

		#startButton {
			background-color: white;
			color: black;
			cursor: pointer;
		}

		#continueButton {
			background-color: white;
			color: black;
			cursor: pointer;
		}

		@media (min-aspect-ratio: 1/1) {
			#canvas {
				position: absolute;
				left: calc((100vw - 100vh) / 2);
				top: 0;
				width: 100vh;
				height: 100vh;
			}

			#startButton {
				position: absolute;
				left: calc((100vw - 100vh) / 2 + 100vh / 28 * 3);
				top: calc(100vh / 14 * 5);
				width: calc(100vh / 14 * 11);
				height: calc(100vh / 14 * 3);
				font-size: calc(100vh / 9);
			}

			#continueButton {
				position: absolute;
				left: calc((100vw - 100vh) / 2 + 100vh / 28 * 3);
				top: calc(100vh / 14 * 9);
				width: calc(100vh / 14 * 11);
				height: calc(100vh / 14 * 3);
				font-size: calc(100vh / 9);
			}
		}

		@media (max-aspect-ratio: 1/1) {
			#canvas {
				position: absolute;
				left: 0;
				top: calc((100vh - 100vw) / 2);
				width: 100vw;
				height: 100vw;
			}

			#startButton {
				position: absolute;
				left: calc(100vw / 28 * 3);
				top: calc((100vh - 100vw) / 2 + 100vw / 14 * 5);
				width: calc(100vw / 14 * 11);
				height: calc(100vw / 14 * 3);
				font-size: calc(100vw / 9);
			}

			#continueButton {
				position: absolute;
				left: calc(100vw / 28 * 3);
				top: calc((100vh - 100vw) / 2 + 100vw / 14 * 9);
				width: calc(100vw / 14 * 11);
				height: calc(100vw / 14 * 3);
				font-size: calc(100vw / 9);
			}

			#trainAName {
				position: absolute;
				left: calc(100vw / 30);
				top: calc((100vh - 100vw) / 2 + 100vw / 30);
				width: calc(100vw / 30 * 28);
				height: calc(100vw / 6 - 100vw / 30 * 2);
			}
		}
	</style>
</head>

<body>
	<canvas id="canvas"></canvas>
	<div id="home" class="screen active">
		<button id='startButton'>初めから</button>
		<button id='continueButton'>続きから</button>
	</div>
	<div id="init" class="screen">
		<input id="trainAName" type="text">
	</div>
	<div id="loadData" class="screen">
	</div>
	<script>

const ModeType = {
	HOME: 0,
	INIT: 1, // 初めから
	LOAD_DATE: 2, // 続きから
};

class Train {
	constructor(name, color) {
		this.name = name;
		this.color = color;
	}
}

const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let mode = ModeType.HOME;
let n;

function showScreen(id) {
	document.querySelectorAll('.screen').forEach(function(screen) {
		screen.classList.remove('active');
	});
	document.getElementById(id).classList.add('active');
}

function draw() {
	ctx.clearRect(0, 0, n, n);

	switch(mode) {
		case ModeType.HOME:
			ctx.font = `${n / 5.5}px Arial`;
			ctx.fillStyle = 'black';
			ctx.fillText('桃太郎電鉄', (n - ctx.measureText('桃太郎電鉄').width) / 2, n / 7 * 2);
			break;
		case ModeType.INIT:
			ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
			ctx.fillRect(n / 30, n / 3 * 2 + n / 30, n / 30 * 28, n / 3 - n / 30 * 2);
			ctx.font = `${(n / 3 - n / 30 * 5) / 3} Arial`;
			ctx.fillStyle = 'black';
			ctx.fillText('社長の名前と', n / 30 * 3, n / 3 * 2 + n / 30 + n / 30 * 25 / 3);
			ctx.fillText('電車の色を', n / 30 * 3, n / 3 * 2 + n / 30 + n / 30 * 25 / 3 * 2);
			ctx.fillText('設定してください', n / 30 * 3, n / 3 * 2 + n / 30 + n / 30 * 25);
			break;
	}
}

canvas.addEventListener('pointerdown', function(event) {
	const rect = canvas.getBoundingClientRect();
	const mouseX = event.clientX - rect.left;
	const mouseY = event.clientY - rect.top;
	draw();
});

document.getElementById('startButton').addEventListener('click', function() {
	mode = ModeType.INIT;
	showScreen('init');
	draw();
});

document.getElementById('continueButton').addEventListener('click', function() {
	mode = ModeType.LOAD_DATE;
	showScreen('loadData');
	draw();
});

window.addEventListener('load', function() {
	const canvas = document.getElementById('canvas');
	canvas.width = canvas.offsetWidth;
	canvas.height = canvas.offsetHeight;
	n = canvas.width;
	draw();
});

	</script>
</body>

</html>
